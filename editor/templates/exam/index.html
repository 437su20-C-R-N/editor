{% extends "layout.html" %}

{% block content %}
{% if exam_list %}
    <ul id="examList">
    {% for exam in exam_list %}
		<li>
			<a href="{% url exam_edit exam.pk exam.slug %}">{{ exam.name }}</a>
			<a href="{% url exam_delete exam.pk exam.slug %}">Delete</a>
		</li>
	{% endfor %}
		<li>
			<a id="newExam" href="{% url exam_new %}">New exam</a>
			<form action="{% url exam_new %}" method="post" id="newExamForm">
				{% csrf_token %}
				Name: <input type="text" name="name" maxlength="200" />
				<input type="text" name="author" value="Author" style="display:none;"/>
				<input type="submit" value="Create" />
			</form>
		</li>
    </ul>
{% else %}
    <p>No exams are available.</p>
{% endif %}
<br />
{% endblock content %}

{% block sidebar %}
<a href="{% url exam_search %}">Search exams</a>
{% endblock sidebar %}

{% block javascripts %}
	{{block.super}}
	<script language="javascript" type="text/javascript">
		$(document).ready(function() {
			$('a#newExam').click(function(e) {
				e.preventDefault();
				e.stopPropagation();

				$('a#newExam').hide();
				$('#newExamForm')
					.show()
					.css('display','inline-block')
					.find('input[name="name"]')
						.focus()
				;
			});
			function cancelCreate() {
				$('a#newExam').show();
				$('#newExamForm').hide();
			}
			$('#newExamForm')
				.hide()
				.find('input[name="name"]')
					.keyup(function(e) {
						if(e.which==27)
							cancelCreate();
					})
			;
		});
	</script>
{% endblock javascripts %}

{% block stylesheets %}
	{{ block.super }}
    <link href="{{ STATIC_URL }}css/index.css" type="text/css" rel="stylesheet" />
{% endblock stylesheets %}
