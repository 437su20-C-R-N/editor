{% extends "layout.html" %}

{% block content %}
	{% if question_list %}
        <table id="question-list">
        <thead>
            <th>Name</th>
            <th>Author</th>
            <th></th>
        </thead>
        <tbody>
		{% for question in question_list %}
            <tr class="question">
                <td><a href="{% url question_edit question.pk question.slug %}">{{ question.name }}</a></td>
                <td class="author {% if user == question.author %}me{% endif %}">
                    {% if user == question.author %}You{% else %}{{ question.author.get_full_name }}{% endif %}
                </td>
                <td class="delete">
    				{% if user == question.author or user.is_superuser %}
	    				<a class="delete" href="{% url question_delete question.pk question.slug %}"></a>
		    		{% endif %}
                </td>
			</tr>
        {% endfor %}
        </tbody>
		</table>
	{% else %}
		<p>No questions are available.</p>
	{% endif %}

	{% if user.is_authenticated %}
		<button id="newQuestion" href="{% url question_new %}">New question</button>
	
		<form action="{% url question_new %}" method="post" id="newQuestionForm">
			{% csrf_token %}
			Name: <input type="text" name="name" maxlength="200" />
	        <input type="submit" value="Create" />
	        <input type="hidden" name="author" value="{{user.id}}" />
		</form>
	
		<form action="{% url question_upload %}" method="post" id="uploadForm" enctype="multipart/form-data">
            {% csrf_token %}
            <button id="uploadButton">Upload a question</button>
            <div class="upload">
                <input type="file" name="file" value="yo"/>
            </div>
		</form>
	{% endif %}
{% endblock content %}

{% block javascripts %}
    {{block.super}}
    <script type="text/javascript" src="{{ STATIC_URL }}js/question/index.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.tablesorter.js"></script>
{% endblock javascripts %}

{% block stylesheets %}
	{{ block.super }}
    <link href="{{ STATIC_URL }}css/index.css" type="text/css" rel="stylesheet" />
    <link href="{{ STATIC_URL }}css/question/index.css" type="text/css" rel="stylesheet" />
{% endblock stylesheets %}
