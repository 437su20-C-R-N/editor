{% extends "editor.html" %}
{% load verbatim %}

{% block javascripts %}
    {{ block.super }}

    <!-- question editor -->
    <script src="{{ STATIC_URL }}js/numbas/R/R.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/numbas/R/en-gb.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/numbas/numbas.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/question/edit.js" type="text/javascript"></script>

    <script type="text/javascript">
        (function() {
            if (!window.Editor) {
                window.Editor = {};
            }
            var Editor = window.Editor;
            Editor['preview_url'] = '{% url question_preview object.pk object.slug %}';
            Editor['download_url'] = '{% url question_download object.pk object.slug %}';
			Editor.questionJSON = {% autoescape off %}{{question.as_json}}{% endautoescape %};

			Editor.numbasExtensions = {% autoescape off %}{{extensions}}{% endautoescape %};
        })();
    </script>
{% endblock javascripts %}
	
{% block content %}
    {{block.super }}

	        <div>
	            <div id="controls">
                    {% if editable %}
                        <div class="editlevels">
                            <button data-bind="click: changeEditLevel">Advanced Easy</button>
                        </div>
                    {% endif %}
                    <div id="editable">This question is {% if not editable %}not{% endif %} editable by you.</div>
	                <div class="controlbox" id="author">
	                Author: {{ object.author.first_name }} {{ object.author.last_name }} ({{ object.author.username }})
	                </div>
	                <div class="controlbox" id="buttons">
	                    Download: 
	                    <a href="{% url question_download object.pk object.slug %}">standalone .zip</a>,
	                    <a href="{% url question_download object.pk object.slug %}?scorm">SCORM package</a>,
	                    <a href="{% url question_source object.pk object.slug %}">source</a>
	                </div>
	                <div class="controlbox" id="admin">
	                    <button id="preview" data-bind="click: showPreview">Test Run</button>
                        
                        {% if editable %}
                            <a id="delete" href="{% url question_delete object.pk object.slug %}"><img src="{{STATIC_URL}}images/delete.png"/> Delete</a>
                        {% endif %}
                        
	                    <a id="copy" href="{% url question_copy object.pk object.slug %}">Make a Copy</a>
	                </div>
	            </div>
				<div id="editor" data-bind="template: 'questionTemplate'">Loading...</div>
			</div>

{% endblock content %}
