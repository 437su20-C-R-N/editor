{% extends "layout.html" %}
{% load verbatim %}

{% block javascripts %}
    {{ block.super }}

    <!-- jstextile -->
    <script type="text/javascript" src="{{ STATIC_URL }}js/textile.js"></script>

    <!-- write maths, see maths -->
    <script type="text/javascript" src="{{ STATIC_URL }}js/rangy-core.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/rangy-position.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/writemaths.js"></script>

    <!-- exam parser -->
    <script type="text/javascript" src="{{ STATIC_URL }}js/examparser.js"></script>

    <!-- editor -->
    <script src="{{ STATIC_URL }}js/editor.js" type="text/javascript"></script>
    
{% endblock javascripts %}

{% block stylesheets %}
    {{ block.super }}

    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/writemaths.css">
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/editor.css">

{% endblock stylesheets %}

{% block content %}
    {{block.super }}
    {% verbatim %}
		<script type="text/x-jquery-tmpl" id="variable">
			<tr class="variable dict">
				<td><span class="handle"></span></td>
				<td><div><input type="text" class="name" data-bind="value:name, valueUpdate: 'input', event: {keyup: function(d,e){if(e.which==13){ $(e.target).parents('.variable').find('.def').focus();} } }"/> = </div></td>
				<td><div><input class="def" type="text" data-bind="value:definition, valueUpdate: 'input', event: {keyup: function(d,e){if(e.which==13){ $parent.addVariable($parent,e,$parent.variables.indexOf(this)+1); } } }"/></div></td>
				<td class="value"><div><span class="value" data-bind="css: {error: error().length>0}, text: display, mathjax: value"></span></div></td>
				<td><div><button class="remove" data-bind="click:remove"></button></div></td>
			</tr>
		</script>

		<!-- Property Inputs -->

		<script type="text/x-jquery-tmpl" id="percentproperty">
			<label>${$item.label}</label>
			<span class="percentproperty display" data-bind="text: $item.property()+'%'"></span>
			<input data-bind="
					value: $item.property, 
					valueUpdate: 'input'" 
				type="range"
				step="5"
				min="0"
				max="100"
			/>
		</script>

		<script type="text/x-jquery-tmpl" id="booleanproperty">
			<label>${$item.label}</label>
			<input data-bind="checked: $item.property" type="checkbox"/>
		</script>

		<script type="text/x-jquery-tmpl" id="property">
			<label>${$item.label}</label>
			{{if $item.type=='checkbox'}}
				<input data-bind="checked: $item.property" type="checkbox"/>
			{{else}}
				<input data-bind="
						value: $item.property, 
						valueUpdate: 'input'" 
					type="${$item.type || 'text'}" 
					{{if $item.min!==undefined}} min="${$item.min}" {{/if}}
					{{if $item.max!==undefined}} max="${$item.max}" {{/if}}
				/>
			{{/if}}
		</script>

		<script type="text/x-jquery-tmpl" id="folder">
			<div class="fold {{if !$item.show}}folded{{/if}}">
				<div id="folder-header" data-bind="unselectable: true">${$item.label}</div>
				<div id="folder">{{html $item.html}}</div>
			</div>
        </script>
    {% endverbatim %}
{% endblock content %}
