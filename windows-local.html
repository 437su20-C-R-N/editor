<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Numbas editor - Windows local installation</title>
        <link rel="stylesheet" href="normalize.css"></link>
        <link rel="stylesheet" href="style.css"></link>
	</head>
	<body>
		<a class="index-link" href="index.html">&larr; Numbas installation instructions</a>

        <h1>Running a personal instance of the editor on Windows</h1>

		<p>
			These are outline instructions on setting up the Numbas editor on a PC running Windows, for personal use.
            For instances where multiple users need access to the editor, we recommend following the <a href="ubuntu.html">Ubuntu</a> installation instructions.
        </p>

        <p>
            The Numbas editor uses <a href="https://www.djangoproject.com/">Django</a>, a web framework written in the Python programming language.
            Django has many configuration options, which we won't detail here.
            For more information, consult <a href="https://docs.djangoproject.com/en/2.0/">the Django documentation</a>.
        </p>

        <section>
		<h2>Installation</h2>
		<ol>
            <li>Install Python 3 from <a href="http://python.org/download/">python.org/download</a>.</li>
            <li>
                <em>If you already have two versions of Python installed on your PC, the command <code>python</code> might run the wrong version. The easiest way of making sure you use the right one is to create a virtual environment. Here's how to do that:</em>
                <code class="shell">pip3 install virtualenv</code>
                <code class="shell">virtualenv -p python3 numbas_venv</code>
                <code class="shell">numbas_venv\Scripts\activate</code>
                You'll need to activate the virtual environment each time you want to use it.
            </li>
			<li>
				You can either download static copies of the Numbas software, or get a version-tracked copy which is easier to update through git. If you're using git, you'll need to install <a href="https://git-scm.com/downloads">Git for Windows</a> first.
			</li>
			<li>
				Either download the Numbas runtime tools <a href="https://github.com/numbas/Numbas/archive/master.zip">from github</a> and extract to a folder called <code>numbas_runtime</code>, or use git to clone the repository:
				<code class="shell">git clone git://github.com/numbas/Numbas.git numbas_runtime</code>
			</li>
			<li>
			    Either download the Numbas editor <a href="https://github.com/numbas/editor/archive/master.zip">from github</a> and extract to a folder called <code>numbas_editor</code>, or use git to clone the repository:
				<code class="shell">git clone git://github.com/numbas/editor.git numbas_editor</code>
			</li>
			<li>
				Install all the required Python modules:
                <code class="shell">pip3 install -r numbas_editor/requirements.txt</code>
                <code class="shell">pip3 install -r numbas_runtime/requirements.txt</code>
            </li>
            <li>
                <em>You may have some trouble installing <code>Pillow</code>. If so, try installing it using a wheel file:</em>
                <ul>
                    <li>Download <a href="https://pypi.python.org/packages/0a/b1/d5b77dc8d399072d7564a849b5cedd40bfabbcfe8981c1a0352033e7280e/Pillow-3.4.2-cp35-cp35m-win32.whl#md5=82e3c3e7caa0ff3bfdaba2e80e55e3d7">Pillow-3.4.2-cp35-cp35m-win32.whl</a> from the Python package index (on 64-bit systems, it's <a href="https://pypi.python.org/packages/13/97/893f8c74e829464f86110f8a0ddefd3886f03cc45af9799185294d7c45e3/Pillow-3.4.2-cp35-cp35m-win_amd64.whl#md5=d034bb805314429fa2afe8da7ecaa935">Pillow-3.4.2-cp35-cp35m-win_amd64.whl</a></li>
                    <li>
                        Run 
                        <code class="shell">pip3 install Pillow-3.4.2-cp35-cp35m-win32.whl</code>
                    </li>
                    <li>Once Pillow is successfully installed, try again to install the rest of the required modules.</li>
                </ul>
            </li>
        </ol>
        </section>

        <section>
		<h2>Configuration</h2>
        <ul>
            <li>
                <p>Run <code class="shell">python first_setup.py</code></p>
                <p>This will configure the editor based on your answers to a few questions, and write <code>numbas/settings.py</code>.</p>
                <p>The default answers for most of the questions apply only to Linux systems; make the appropriate changes using the paths described in the earlier steps.</p>
                <p>If you've followed these instructions exactly, use the following values:</p>
                <dl>
                    <dt>Path of the Numbas compiler</dt>
                    <dd><code>../numbas_runtime</code></dd>

                    <dt>Which database engine are you using?</dt>
                    <dd><code>sqlite3</code></dd>

                    <dt>Where are static files stored?</dt>
                    <dd><code>static/</code></dd>

                    <dt>Where are uploaded files stored?</dt>
                    <dd><code>media/</code></dd>

                    <dt>Where are preview exams stored?</dt>
                    <dd><code>static/previews/</code></dd>

                    <dt>Base URL of previews</dt>
                    <dd><code>/static/previews/</code></dd>

                    <dt>Python command</dt>
                    <dd><code>python</code></dd>
                </dl>
                <p>If you make any mistakes, you can run the script again, or edit <code>numbas/settings.py</code> directly.</p>
            </li>
            <li>
                Start the server
                <code class="shell">python manage.py runserver</code></li>
            </li>
            <li>Open <a href="http://localhost:8000">htttp://localhost:8000</a> in your web browser.</li>
        </ul>
        </section>

        <section>
        <h2>Ongoing maintenance</h2>

        <p>
            If you used git to clone the runtime and editor repositories, run the following commands to update your installation:
            <code class="shell">cd numbas_editor</code>
            <code class="shell">git pull origin master</code>
            <code class="shell">python manage.py migrate</code>
            <code class="shell">pip install -r requirements.txt</code>
            <code class="shell">cd ../numbas_runtime</code>
            <code class="shell">git pull origin master</code>
            <code class="shell">pip install -r requirements.txt</code>
        </p>

        <p>The admin site, where you can manually edit entries in the database, is at <a href="http://localhost:8000/admin">http://localhost:8000/admin</a>.</p>
        </section>

        <footer>
            <p><a href="http://www.numbas.org.uk">Numbas</a> is an open-source, web-based e-assessment system.</p>
        </footer>
    </body>
</html>
