<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Numbas editor - Windows installation</title>
        <link rel="stylesheet" href="normalize.css"></link>
        <link rel="stylesheet" href="style.css"></link>
	</head>
	<body>
		<a class="index-link" href="index.html">Numbas installation instructions</a>
		<h1>Running a personal instance of the editor on Windows</h1>
		<h2>Installation</h2>
		<ol>
			<li>Install Python 3 and Python 2.7 from <a href="http://python.org/download/">python.org/download</a>. Python 2 is needed to run the webserver, while Python 3 is needed to run the Numbas tools.</li>
			<li>
				Install pip for both Python 2 and Python3 (this is annoyingly fiddly).
				<ul>
					<li>Download and install <a href="http://pypi.python.org/pypi/setuptools">setuptools for Python 2</a>.</li>
					<li>Install pip <code class="shell">c:\python27\Scripts\easy_install pip</code></li>
				</ul>
			</li>
			<li>
				You can either download static copies of the Numbas software, or get a version-tracked copy which is easier to update through git. If you're using git, you'll need to install <a href="https://git-scm.com/downloads">Git for Windows</a> first.
			</li>
			<li>
				Either download the Numbas runtime tools <a href="https://github.com/numbas/Numbas/archive/master.zip">from github</a> and extract to a folder called <code>numbas_runtime</code>, or git clone the repository:
				<code class="shell">git clone git://github.com/numbas/Numbas.git numbas_runtime</code>
			</li>
			<li>
			Either download the Numbas editor <a href="https://github.com/numbas/editor/archive/master.zip">from github</a> and extract to a folder called <code>numbas_editor</code>, or git clone the repository:
				<code class="shell">git clone git://github.com/numbas/editor.git numbas_editor</code>
			</li>
			<li>
				Go into the <code>numbas_editor/numbas</code> directory, and install all the required Python2 modules:
				<code class="shell">c:\python27\Scripts\pip install -r requirements.pip</code>
			</li>
		</ol>

		<h2>Configuration</h2>
        <ol>
            <li>
                Copy <code>settings.py.dist</code> to <code>settings.py</code>
                <ul>
                    <li>Change <code>MEDIA_ROOT</code> to <code>'media'</code></li>
                    <li>Change <code>STATIC_ROOT</code> to <code>'editor/static'</code></li>
                    <li>Change <code>NUMBAS_PATH</code> to <code>'../numbas_runtime'</code></li>
                    <li>Change <code>PREVIEW_PATH</code> to <code>'editor/static/previews'</code>, and create that directory.</li>
                    <li>Change <code>PREVIEW_URL</code> to <code>'/static/previews/'</code></li>
                    <li>Change <code>PYTHON_EXEC</code> to <code>'c:/python35/python'</code> (the exact location will depend on which version of python 3 you've installed. If it's 3.3 for example, it'll be <code>c:/python33/python</code>)</li>
                </ul>
            </li>

            <li>
                Copy <code>database.py.dist</code> to <code>database.py</code>
                <ul>
                    <li>Change <code>ENGINE</code> to <code>'django.db.backends.sqlite3'</code></li>
                    <li>Change <code>NAME</code> to <code>'database.sqlite'</code></li>
                </ul>
            </li>

            <li>
                Sync the database:
                <code class="shell">c:\python27\python manage.py migrate</code>
            </li>
            <li>Copy <code>editor/templates/index_message.html.dist</code> to <code>editor/templates/index_message.html</code>, and customise it to your liking.</li>
            <li>
                Create a superuser (you'll be asked for a username, email address and password - the email address isn't used).
                <code class="shell">c:\python27\python manage.py createsuperuser</code></li>
            </li>
            <li>
                Start the server
                <code class="shell">c:\python27\python manage.py runserver</code></li>
            </li>
            <li>Open <a href="http://localhost:8000">htttp://localhost:8000</li>
        </ol>

    </body>
</html>
