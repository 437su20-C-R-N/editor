<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Numbas editor - Mac installation</title>
        <link rel="stylesheet" href="normalize.css"></link>
        <link rel="stylesheet" href="style.css"></link>
	</head>
	<body>
		<a class="index-link" href="index.html">&larr; Numbas installation instructions</a>
		<h1>Running a personal instance of the editor on a Mac</h1>

		<p>
			These are outline instructions on setting up the Numbas editor on a Max, for personal use.
            For instances where multiple users need access to the editor, we recommend following the <a href="ubuntu.html">Ubuntu</a> installation instructions.
        </p>

        <section>
		<h2>Installation</h2>
		<ol>
			<li>Install Python 3 <a href="http://python.org/download/">python.org/download</a>.</li>
            <li>
                <em>If you already have two versions of Python installed on your PC, the command <code>python</code> might run the wrong version. The easiest way of making sure you use the right one is to create a virtual environment. Here's how to do that:</em>
                <code class="shell">pip3 install virtualenv</code>
                <code class="shell">virtualenv -p python3 numbas_venv</code>
                <code class="shell">source numbas_venv/bin/activate</code>
                You'll need to activate the virtual environment each time you want to use it.
            </li>
			<li>
            Either download the Numbas runtime tools <a href="https://github.com/numbas/Numbas/archive/master.zip">from github</a> and extract to a folder called <code>numbas_runtime</code>, or use <a href="https://git-scm.com/">git</a> to clone the repository:
				<code class="shell">git clone git://github.com/numbas/Numbas.git numbas_runtime</code>
			</li>
			<li>
			Either download the Numbas editor <a href="https://github.com/numbas/editor/archive/master.zip">from github</a> and extract to a folder called <code>numbas_editor</code>, or use git to clone the repository:
				<code class="shell">git clone git://github.com/numbas/editor.git numbas_editor</code>
			</li>
			<li>
				Install all the required Python modules:
                <code class="shell">pip3 install -r numbas_editor/requirements.txt</code>
                <code class="shell">pip3 install -r numbas_runtime/requirements.txt</code>
            </li>
        </ol>
        </section>

        <section>
		<h2>Configuration</h2>
		<ol>
			<li>
                Copy <code>numbas_editor/numbas/settings.py.dist</code> to <code>numbas_editor/numbas/settings.py</code>
				<ul>
					<li>Change <code>STATIC_ROOT</code> to <code>'editor/static'</code></li>
					<li>Change <code>NUMBAS_PATH</code> to <code>'../numbas_runtime'</code></li>
					<li>Change <code>PREVIEW_PATH</code> to <code>'editor/static/previews'</code>, and create that directory.</li>
					<li>Change <code>PREVIEW_URL</code> to <code>'/static/previews/'</code></li>
					<li>Change <code>PYTHON_EXEC</code> to <code>'python3'</code></li>
				</ul>
			</li>

			<li>Copy <code>database.py.dist</code> to <code>database.py</code>
				<ul>
					<li>Change <code>ENGINE</code> to <code>'django.db.backends.sqlite3'</code></li>
					<li>Change <code>NAME</code> to <code>'database.sqlite'</code></li>
				</ul>
			</li>

            <li>
                Sync the database:
				<code class="shell">python manage.py migrate</code>
			</li>
			<li>Copy <code>editor/templates/index_message.html.dist</code> to <code>editor/templates/index_message.html</code>, and customise it to your liking.</li>
            <li>
                Create a superuser (you'll be asked for a username, email address and password - the email address isn't used).
                <code class="shell">python manage.py createsuperuser</code></li>
            </li>
			<li>
				Start the server:
				<code class="shell">python manage.py runserver</code></li>
			</li>
            <li>Open <a href="http://localhost:8000">htttp://localhost:8000</a></li>
        </ol>
        </section>

        <section>
        <h2>Ongoing maintenance</h2>

        <p>
            If you used git to clone the runtime and editor repositories, run the following commands to update your installation:
            <code class="shell">cd numbas_editor</code>
            <code class="shell">git pull origin master</code>
            <code class="shell">python manage.py migrate</code>
            <code class="shell">cd ../numbas_runtime</code>
            <code class="shell">git pull origin master</code>
        </p>

        <p>The admin site, where you can manually edit entries in the database, is at <a href="http://localhost:8000/admin">http://localhost:8000/admin</a>.</p>
        </section>

        <footer>
            <p><a href="http://www.numbas.org.uk">Numbas</a> is an open-source, web-based e-assessment system.</p>
        </footer>
	</body>
</html>
